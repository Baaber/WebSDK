<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ayesha, will you be my Valentine?</title>
  <style>
    :root{
      --bg1:#fff0f6;
      --bg2:#ffe3ec;
      --card:#ffffffcc;
      --text:#2b2b2b;
      --yes:#22c55e;
      --no:#ef4444;
      --shadow:#00000012;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(circle at top, var(--bg1), var(--bg2));
      color:var(--text);
      overflow:hidden;
      padding:24px;
    }
    .card{
      width:min(760px, 100%);
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid #ffffff80;
      border-radius:26px;
      padding:30px 22px;
      box-shadow: 0 20px 60px var(--shadow);
      text-align:center;
      position:relative;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:#ffffffb3;
      border:1px solid #ffffffcc;
      font-weight:900;
      font-size:13px;
      box-shadow: 0 10px 22px var(--shadow);
    }
    h1{
      margin:14px 0 10px;
      font-size: clamp(22px, 3vw, 34px);
      line-height:1.15;
      letter-spacing:-0.02em;
    }
    .sub{
      margin: 0 0 18px;
      opacity:0.82;
      font-size: 14px;
    }
    .gif{
      width:min(360px, 90%);
      border-radius:18px;
      box-shadow: 0 12px 30px var(--shadow);
    }

    .playArea{
      margin-top: 10px;
      padding: 18px 14px;
      border-radius: 18px;
      border: 2px dashed #ff8fab;
      background: #ffffff85;
      position: relative;
      overflow: hidden; /* keep No inside the border */
    }

    .actions{
      display:flex;
      gap:14px;
      justify-content:center;
      align-items:center;
      flex-wrap:wrap;
      margin-top: 8px;
      position: relative;
      min-height: 92px;
    }

    button{
      border:none;
      cursor:pointer;
      padding: 14px 18px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 16px;
      transition: transform 140ms ease, filter 140ms ease, left 160ms ease, top 160ms ease;
      box-shadow: 0 12px 30px var(--shadow);
      color:white;
      min-width: 150px;
      touch-action: manipulation;
      user-select:none;
      position: relative;
      z-index: 1;
      will-change: transform, left, top;
    }
    button:hover{ filter: brightness(1.02); }
    button:active{ transform: translateY(1px) scale(0.99); }

    .yes{ background: var(--yes); }
    .no{
      background: var(--no);
      position:absolute; /* so it can move around */
      left: 50%;
      top: 18px;
      transform: translateX(0) scale(1);
    }

    .hint{
      margin-top:12px;
      font-size:13px;
      opacity:0.78;
      min-height: 18px;
    }

    .success{
      display:none;
      animation: pop 240ms ease-out;
    }
    @keyframes pop{
      from{ transform: scale(0.98); opacity:0; }
      to{ transform: scale(1); opacity:1; }
    }

    #confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:999;
      display:none;
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <div class="card">
    <div id="askView">
      <div class="badge">ðŸ’Œ for Ayesha</div>

      <div style="margin-top:14px;">
        <img
          class="gif"
          alt="Cute valentine gif"
          src="https://media.giphy.com/media/DUuyU3KyYGLNS/giphy.gif"
        />
      </div>

      <h1>Ayesha, I know itâ€™s late butâ€¦ will you be my Valentine? ðŸ’˜</h1>
      <div class="sub">One tiny question, one huge yes.</div>

      <div class="playArea" id="playArea">
        <div class="actions" id="actions">
          <button class="yes" id="yesBtn">Yes ðŸ’–</button>
          <button class="no" id="noBtn">No ðŸ™ˆ</button>
        </div>
      </div>

      <div class="hint" id="hint"></div>
    </div>

    <div class="success" id="successView">
      <div class="badge">ðŸ’ž officially mine</div>

      <div style="margin-top:14px;">
        <img
          class="gif"
          alt="Happy dancing gif"
          src="https://media.giphy.com/media/KxWDsHfQH6S8AnkZGo/giphy.gif"
        />
      </div>

      <h1>YAYYYYY AYESHA ðŸ’–</h1>
      <div class="sub">Ok now come here, I deserve a hug.</div>
    </div>
  </div>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const askView = document.getElementById("askView");
    const successView = document.getElementById("successView");
    const hint = document.getElementById("hint");
    const actions = document.getElementById("actions");

    let yesScale = 1;
    let noScale = 1;

    const YES_MAX = 3.2;
    const NO_MIN = 0.22;

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
    function rand(min, max){ return Math.random() * (max - min) + min; }

    function teaseText(){
      const lines = [
        "nice try ðŸ˜Œ",
        "oops, it ran away ðŸ™ˆ",
        "you almost got it ðŸ˜‚",
        "ok ok, press Yes ðŸ’—",
        "that No is getting shy ðŸ¥º"
      ];
      hint.textContent = lines[Math.floor(Math.random() * lines.length)];
    }

    function placeNoRandomly(){
      const areaW = actions.clientWidth;
      const areaH = actions.clientHeight;

      const btnW = noBtn.offsetWidth * noScale;
      const btnH = noBtn.offsetHeight * noScale;

      const padding = 8;
      const maxLeft = Math.max(padding, areaW - btnW - padding);
      const maxTop = Math.max(padding, areaH - btnH - padding);

      const left = clamp(rand(padding, maxLeft), padding, maxLeft);
      const top = clamp(rand(padding, maxTop), padding, maxTop);

      noBtn.style.left = `${left}px`;
      noBtn.style.top = `${top}px`;
      noBtn.style.transform = `scale(${noScale})`;
    }

    function growYes(){
      yesScale = Math.min(YES_MAX, yesScale * 1.14);
      yesBtn.style.transform = `scale(${yesScale})`;
    }

    function shrinkNo(){
      noScale = Math.max(NO_MIN, noScale * 0.86);
    }

    function dodge(){
      growYes();
      shrinkNo();
      placeNoRandomly();
      teaseText();

      if (noScale <= 0.28) {
        hint.textContent = "the universe said: click Yes ðŸ’˜";
      }
    }

    // Dodge on hover and tap/click attempts
    noBtn.addEventListener("mouseenter", dodge);
    noBtn.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      dodge();
    });
    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      dodge();
    });

    window.addEventListener("load", () => {
      // Start with both visible and side-by-side visually,
      // then place No near its original spot inside the actions area
      noScale = 1;
      yesScale = 1;
      yesBtn.style.transform = "scale(1)";
      // Place "No" roughly to the right of "Yes" initially
      const yRect = yesBtn.getBoundingClientRect();
      const aRect = actions.getBoundingClientRect();
      const initialLeft = (yRect.right - aRect.left) + 14;
      const initialTop = 8;
      noBtn.style.left = `${clamp(initialLeft, 8, actions.clientWidth - noBtn.offsetWidth - 8)}px`;
      noBtn.style.top = `${initialTop}px`;
      noBtn.style.transform = "scale(1)";
    });

    yesBtn.addEventListener("click", () => {
      askView.style.display = "none";
      successView.style.display = "block";
      startConfetti(2400);
    });

    // Confetti (no library)
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let pieces = [];
    let animating = false;

    function resizeCanvas(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function makePieces(count=240){
      const colors = ["#ff4d6d","#ff8fab","#ffd6e0","#c0fdfb","#7c3aed","#22c55e","#f59e0b","#fb7185"];
      const w = window.innerWidth;
      const h = window.innerHeight;

      pieces = Array.from({length: count}, () => ({
        x: rand(0, w),
        y: rand(-h, 0),
        r: rand(3, 7),
        vx: rand(-2, 2),
        vy: rand(2.6, 6.2),
        rot: rand(0, Math.PI),
        vr: rand(-0.15, 0.15),
        color: colors[Math.floor(Math.random() * colors.length)],
        shape: Math.random() < 0.35 ? "rect" : "circle"
      }));
    }

    function draw(){
      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      for (const p of pieces){
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = p.color;

        if (p.shape === "rect") {
          ctx.fillRect(-p.r, -p.r, p.r * 2.2, p.r * 1.4);
        } else {
          ctx.beginPath();
          ctx.arc(0, 0, p.r, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.restore();

        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;

        if (p.y > window.innerHeight + 20) {
          p.y = -20;
          p.x = rand(0, window.innerWidth);
        }
        if (p.x < -20) p.x = window.innerWidth + 20;
        if (p.x > window.innerWidth + 20) p.x = -20;
      }
    }

    function loop(){
      if (!animating) return;
      draw();
      requestAnimationFrame(loop);
    }

    function startConfetti(durationMs=2400){
      canvas.style.display = "block";
      animating = true;
      makePieces(240);
      loop();

      setTimeout(() => {
        animating = false;
        canvas.style.display = "none";
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      }, durationMs);
    }
  </script>
</body>
</html>
