<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ayesha, will you be my Valentine?</title>
  <style>
    :root{
      --bg1:#fff0f6;
      --bg2:#ffe3ec;
      --card:#ffffffcc;
      --text:#2b2b2b;
      --yes:#22c55e;
      --no:#ef4444;
      --shadow:#00000012;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(circle at top, var(--bg1), var(--bg2));
      color:var(--text);
      overflow:hidden;
      padding:24px;
    }
    .card{
      width:min(760px, 100%);
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid #ffffff80;
      border-radius:26px;
      padding:30px 22px;
      box-shadow: 0 20px 60px var(--shadow);
      text-align:center;
      position:relative;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:#ffffffb3;
      border:1px solid #ffffffcc;
      font-weight:800;
      font-size:13px;
      box-shadow: 0 10px 22px var(--shadow);
    }
    h1{
      margin:14px 0 10px;
      font-size: clamp(22px, 3vw, 34px);
      line-height:1.15;
      letter-spacing:-0.02em;
    }
    .sub{
      margin: 0 0 18px;
      opacity:0.82;
      font-size: 14px;
    }
    .gif{
      width:min(360px, 90%);
      border-radius:18px;
      box-shadow: 0 12px 30px var(--shadow);
    }

    .actions{
      display:flex;
      gap:14px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 16px;
      position: relative;
    }

    button{
      border:none;
      cursor:pointer;
      padding: 14px 18px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 16px;
      transition: transform 160ms ease, filter 160ms ease, left 140ms ease, top 140ms ease;
      box-shadow: 0 12px 30px var(--shadow);
      color:white;
      min-width: 150px;
      touch-action: manipulation;
      user-select:none;
    }
    button:hover{ filter: brightness(1.02); }
    button:active{ transform: translateY(1px) scale(0.99); }

    .yes{ background: var(--yes); }
    .no{
      background: var(--no);
      position: relative; /* will switch to absolute once it starts dodging */
    }

    .hint{
      margin-top:14px;
      font-size:13px;
      opacity:0.78;
      min-height: 18px;
    }

    .success{
      display:none;
      animation: pop 240ms ease-out;
    }
    @keyframes pop{
      from{ transform: scale(0.98); opacity:0; }
      to{ transform: scale(1); opacity:1; }
    }

    #confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:999;
      display:none;
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <div class="card">
    <!-- Asking view -->
    <div id="askView">
      <div class="badge">ðŸ’Œ for Ayesha</div>

      <div style="margin-top:14px;">
        <img
          class="gif"
          alt="Cute valentine gif"
          src="https://media.giphy.com/media/DUuyU3KyYGLNS/giphy.gif"
        />
      </div>

      <h1>Ayesha, I know itâ€™s late butâ€¦ will you be my Valentine? ðŸ’˜</h1>
      <div class="sub">One tiny question, one huge yes.</div>

      <div class="actions" id="actions">
        <button class="yes" id="yesBtn">Yes ðŸ’–</button>
        <button class="no" id="noBtn">No ðŸ™ˆ</button>
      </div>

      <div class="hint" id="hint"></div>
    </div>

    <!-- Success view -->
    <div class="success" id="successView">
      <div class="badge">ðŸ’ž officially mine</div>

      <div style="margin-top:14px;">
        <img
          class="gif"
          alt="Happy dancing gif"
          src="https://media.giphy.com/media/KxWDsHfQH6S8AnkZGo/giphy.gif"
        />
      </div>

      <h1>YAYYYYY AYESHA ðŸ’–</h1>
      <div class="sub">Ok now come here, I deserve a hug.</div>
    </div>
  </div>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const askView = document.getElementById("askView");
    const successView = document.getElementById("successView");
    const hint = document.getElementById("hint");
    const actions = document.getElementById("actions");

    // Yes grows a little each time she tries to hit "No"
    let yesScale = 1;
    const YES_MAX = 2.8;

    function growYes(){
      yesScale = Math.min(YES_MAX, yesScale * 1.12);
      yesBtn.style.transform = `scale(${yesScale})`;
    }

    function teaseText(){
      const lines = [
        "nice try ðŸ˜Œ",
        "that button is FAST ðŸ˜‚",
        "oops, it ran away ðŸ™ˆ",
        "Ayesha you canâ€™t catch it ðŸ˜­",
        "ok ok, just press Yes ðŸ’—"
      ];
      hint.textContent = lines[Math.floor(Math.random() * lines.length)];
    }

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    // Move the No button somewhere else within the card, not off-screen
    function dodgeNo(){
      const card = document.querySelector(".card");
      const cardRect = card.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      // Make it absolute so it can roam inside the card
      noBtn.style.position = "absolute";

      // Compute safe area inside the card
      const padding = 16;
      const maxLeft = cardRect.width - btnRect.width - padding;
      const maxTop = cardRect.height - btnRect.height - padding;

      // Random position, biased away from the Yes button area
      const left = rand(padding, maxLeft);
      const top = rand(Math.max(130, padding), maxTop); // keep it below the top gif area

      noBtn.style.left = `${clamp(left, padding, maxLeft)}px`;
      noBtn.style.top = `${clamp(top, Math.max(130, padding), maxTop)}px`;

      // Give Yes a tiny boost for extra cuteness
      growYes();
      teaseText();
    }

    // Random helper
    function rand(min, max){ return Math.random() * (max - min) + min; }

    // Dodge on hover (mouse) and on touch/click attempts (mobile)
    noBtn.addEventListener("mouseenter", dodgeNo);
    noBtn.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      dodgeNo();
    });
    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      dodgeNo();
    });

    yesBtn.addEventListener("click", () => {
      askView.style.display = "none";
      successView.style.display = "block";
      startConfetti(2400);
    });

    // Confetti (no library)
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let pieces = [];
    let animating = false;

    function resizeCanvas(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function makePieces(count=240){
      const colors = ["#ff4d6d","#ff8fab","#ffd6e0","#c0fdfb","#7c3aed","#22c55e","#f59e0b","#fb7185"];
      const w = window.innerWidth;
      const h = window.innerHeight;

      pieces = Array.from({length: count}, () => ({
        x: rand(0, w),
        y: rand(-h, 0),
        r: rand(3, 7),
        vx: rand(-2, 2),
        vy: rand(2.6, 6.2),
        rot: rand(0, Math.PI),
        vr: rand(-0.15, 0.15),
        color: colors[Math.floor(Math.random() * colors.length)],
        shape: Math.random() < 0.35 ? "rect" : "circle"
      }));
    }

    function draw(){
      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      for (const p of pieces){
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = p.color;

        if (p.shape === "rect") {
          ctx.fillRect(-p.r, -p.r, p.r * 2.2, p.r * 1.4);
        } else {
          ctx.beginPath();
          ctx.arc(0, 0, p.r, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.restore();

        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;

        if (p.y > window.innerHeight + 20) {
          p.y = -20;
          p.x = rand(0, window.innerWidth);
        }
        if (p.x < -20) p.x = window.innerWidth + 20;
        if (p.x > window.innerWidth + 20) p.x = -20;
      }
    }

    function loop(){
      if (!animating) return;
      draw();
      requestAnimationFrame(loop);
    }

    function startConfetti(durationMs=2400){
      canvas.style.display = "block";
      animating = true;
      makePieces(240);
      loop();

      setTimeout(() => {
        animating = false;
        canvas.style.display = "none";
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
      }, durationMs);
    }
  </script>
</body>
</html>
